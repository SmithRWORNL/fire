\hypertarget{a00818}{}\section{fire\+:\+:State$<$ T $>$ Class Template Reference}
\label{a00818}\index{fire\+::\+State$<$ T $>$@{fire\+::\+State$<$ T $>$}}


{\ttfamily \#include $<$State.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{a00818_a697d926ef53bfa150fdabb31db269c21}{State} ()
\item 
\hyperlink{a00818_a40fd4082cd305e2054208a0b9aaa6ad4}{State} (const long \&num\+Elements)
\item 
\hyperlink{a00818_a1882f10811364f7eaa8732514bef43cf}{State} (std\+::shared\+\_\+ptr$<$ T $>$ domain\+State)
\item 
\hyperlink{a00818_adb435ffb356eb26cf62876ede99b9a30}{State} (std\+::shared\+\_\+ptr$<$ T $>$ domain\+State, const long \&num\+Elements)
\item 
void \hyperlink{a00818_adfb16dbbaab3549c09da734605f815a3}{add\+Monitor} (std\+::function$<$ void(\hyperlink{a00818}{State}$<$ T $>$ \&)$>$ monitor)
\item 
T \& \hyperlink{a00818_a71cec682edafbf5c3b09e9d6dc91f12b}{get} () const
\item 
void \hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{t} (double t)
\item 
const double \& \hyperlink{a00818_a425a0236c4edc506b30196d352118104}{t} () const
\item 
double $\ast$ \hyperlink{a00818_a54507a9e31127580a2c485ce9829934e}{u} () const
\item 
void \hyperlink{a00818_a1b6b91c51fe4d53f268a33c77fecff11}{u} (double $\ast$data)
\item 
double $\ast$ \hyperlink{a00818_a4d20304931607c1cb27358fb3776a620}{dudt} (const double \&\hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{t}) const
\item 
void \hyperlink{a00818_a22b2d9e2feb153c819e90a4ac7ee8d72}{size} (const long \&num\+Elements)
\item 
int \hyperlink{a00818_a19f1d7b5ce637db79b96f29bd146842a}{size} () const
\item 
{\footnotesize template$<$$>$ }\\double $\ast$ \hyperlink{a00818_a9cc60054f9342b4a84b29937dc45a6d8}{u} () const
\item 
\mbox{\Hypertarget{a00818_a2a3ffc947a9658d7e7173591460d9424}\label{a00818_a2a3ffc947a9658d7e7173591460d9424}} 
{\footnotesize template$<$$>$ }\\void {\bfseries u} (double $\ast$u\+Data)
\item 
\mbox{\Hypertarget{a00818_afa1168dde00e19cee4a7d6d28b4bf9eb}\label{a00818_afa1168dde00e19cee4a7d6d28b4bf9eb}} 
{\footnotesize template$<$$>$ }\\double $\ast$ {\bfseries dudt} (const double \&\hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{t}) const
\item 
\mbox{\Hypertarget{a00818_ac2313bde7f5d55daee4097232e9ae5ea}\label{a00818_ac2313bde7f5d55daee4097232e9ae5ea}} 
{\footnotesize template$<$$>$ }\\double $\ast$ {\bfseries u} () const
\item 
\mbox{\Hypertarget{a00818_a93837c9543786144b6517a295ed1fec8}\label{a00818_a93837c9543786144b6517a295ed1fec8}} 
{\footnotesize template$<$$>$ }\\double $\ast$ {\bfseries dudt} (const double \&\hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{t}) const
\item 
\mbox{\Hypertarget{a00818_ac2313bde7f5d55daee4097232e9ae5ea}\label{a00818_ac2313bde7f5d55daee4097232e9ae5ea}} 
{\footnotesize template$<$$>$ }\\double $\ast$ {\bfseries u} () const
\item 
\mbox{\Hypertarget{a00818_a93837c9543786144b6517a295ed1fec8}\label{a00818_a93837c9543786144b6517a295ed1fec8}} 
{\footnotesize template$<$$>$ }\\double $\ast$ {\bfseries dudt} (const double \&\hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{t}) const
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{a00818_ad271749a2a4f73c11e82ae28141d3b65}{notify\+Monitors} ()
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ T $>$ \hyperlink{a00818_a9a75139f1d613abc9fb82600757087f6}{state}
\item 
double \hyperlink{a00818_a4985617940993cea772a7fc977c87237}{t\+Val}
\item 
long \hyperlink{a00818_a08f8f4ea745ae855ef730896efabf1ae}{system\+Size}
\item 
std\+::unique\+\_\+ptr$<$ double $>$ \hyperlink{a00818_aae89d6e350df763d503d7da862f1f30a}{u\+Arr}
\item 
std\+::unique\+\_\+ptr$<$ double $>$ \hyperlink{a00818_a9954ba8c1a12555ca1bf67b6a2bf2b3b}{dudt\+Arr}
\item 
std\+::vector$<$ std\+::function$<$ void(\hyperlink{a00818}{State}$<$ T $>$ \&)$>$ $>$ \hyperlink{a00818_ae1571b0a1c82060e525ce6ce2119ae5e}{monitors}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename T$>$\newline
class fire\+::\+State$<$ T $>$}

This is a container class for user-\/provided data structures that can be passed to solvers. It is designed such that container operations are handled by default by the template and clients override the \hyperlink{a00818_a54507a9e31127580a2c485ce9829934e}{u()} and \hyperlink{a00818_a4d20304931607c1cb27358fb3776a620}{dudt()} operations to tailor the behavior for the templated type.

Instances should be constructed using the \hyperlink{a00171_abca66b4f2a1543308b663714bd8b4855}{build$<$$>$()} templates as follows\+: 
\begin{DoxyCode}
State<T> myState = build<T>(); \textcolor{comment}{// If T() takes no arguments}
State<T> myState2 = build<T,int>(); \textcolor{comment}{// If T takes one argument}
State<T> myState3 = build<T,int, const double &>(); \textcolor{comment}{// If T takes 2 args}
\textcolor{comment}{//...etc.}
\end{DoxyCode}


The variable t, when discussed below, is meant to represent a free parameter on which u and du depend. It commonly represents time, but might might also represent some other parameter. It is not explicitly called \char`\"{}time\char`\"{} to keep the interface clean of any concepts that might limit the scope of the class to only data that is used in time integrations, when in fact it can be used in the solution of any initial value problem.

The layout of the state is, in effect, a matrix with size n\+\_\+e $\ast$ n\+\_\+t, where n\+\_\+e is the number of unique elements (or unknowns) considered in the system and n\+\_\+t is the number of values of t at which those values are considered. Thus, in the case where a problem has six unknowns (n\+\_\+e = 6) and fifty time steps (t = time and n\+\_\+t = 50), the state class could represent a 6 x 50 matrix with a total of 300 elements. Note that whether or not \char`\"{}the matrix\char`\"{} is stored in column or row major format is not important.

This class is designed to be greedy and narcissistic. In lieu of allowing users to create and store their own instances of T, it creates (add()) those instances and forces users to interact with references retrieved using the getters. Being so greedy makes it possible for this class to efficiently manage memory with lower implementation overhead and no need to rely on clients to correctly initialize data. The original design of this class called for extensive use of smart pointers (using std\+::share), but there are few computational advantages -\/ if any -\/ compared to simple references. This is because simple references do not incur atomic increment and decrement costs when crossing function boundaries, but smart pointers do. In the author\textquotesingle{}s personal experience, the cost of working with smart pointers can be as much as a factor of two in tight loops with function boundaries. References are, by comparison, free in tight loops. Alternatively, passing a reference to the smart pointer is also free, but it is hardly necessary to share a smart pointer at all if the client does not need to participate in the memory lifecycle of the class, and indeed the practice is not recommended (c.\+f. -\/ Sutter\textquotesingle{}s 2014 talk) at all in that case.

Three operations are provided for working with \char`\"{}fundamental state
vectors\char`\"{} as arrays of doubles, but casual users are warned that these operations are for those implementing fast solvers based on this class and, in general, casual users should stick to add() and \hyperlink{a00818_a71cec682edafbf5c3b09e9d6dc91f12b}{get()}.

\hyperlink{a00818}{State} objects can be monitored by registering a functor with the \hyperlink{a00818_adfb16dbbaab3549c09da734605f815a3}{add\+Monitor()} operation. The simplest example is to use a Lambda as follows\+: 
\begin{DoxyCode}
   \textcolor{comment}{// Register an observer to write a message when the state changes.}
state.add([](State<ReactionNetwork> & state) \{
   std::cout << \textcolor{stringliteral}{"Lambda Test "} << state.t() << std::endl;
   \textcolor{keywordflow}{return};
\});
\end{DoxyCode}
 Monitors are only called when \hyperlink{a00818_a1b6b91c51fe4d53f268a33c77fecff11}{u(double $\ast$)} is called. Classes that create explicit specializations of that function should call \hyperlink{a00818_ad271749a2a4f73c11e82ae28141d3b65}{notify\+Monitors()}, a protected notification function, to notify the monitors if they require that functionality. Simply calling the \hyperlink{a00818_ad271749a2a4f73c11e82ae28141d3b65}{notify\+Monitors()} function immediately before return is sufficient.

This class does not yet consider thread safety issues when calling the monitors or updating the state, so be warned.

Common Errors\+: Declaring T instead of T\& -\/ The C++ compiler will not throw an error in the following scenario and will create a copy instead\+: 
\begin{DoxyCode}
T myT1 = state.get(); \textcolor{comment}{// WRONG - Creates a copy of the state!}
T & myT2 = state.get(); \textcolor{comment}{// Correct - Uses the state by reference.}
\textcolor{keyword}{auto} myT3 = state.get(); \textcolor{comment}{// WRONG - Same as the first case.}
\textcolor{keyword}{auto} & myT4 = state.get(); \textcolor{comment}{// Correct - Same as the second case.}
\end{DoxyCode}


Road Map\+:
\begin{DoxyItemize}
\item Right now the auxilliary storage buffers u\+Arr and udt\+Arr are always allocated. It should be possible to enable or disable this.
\item Should this be thread safe?
\item Would be interesting to name monitors. 
\end{DoxyItemize}

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{a00818_a697d926ef53bfa150fdabb31db269c21}\label{a00818_a697d926ef53bfa150fdabb31db269c21}} 
\index{fire\+::\+State@{fire\+::\+State}!State@{State}}
\index{State@{State}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{State()}{State()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
\hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::\hyperlink{a00818}{State} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Constructor \mbox{\Hypertarget{a00818_a40fd4082cd305e2054208a0b9aaa6ad4}\label{a00818_a40fd4082cd305e2054208a0b9aaa6ad4}} 
\index{fire\+::\+State@{fire\+::\+State}!State@{State}}
\index{State@{State}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{State()}{State()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
\hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::\hyperlink{a00818}{State} (\begin{DoxyParamCaption}\item[{const long \&}]{num\+Elements }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Alternative constructor that also sets the system size. 
\begin{DoxyParams}{Parameters}
{\em the} & number of unique data elements in the state \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{a00818_a1882f10811364f7eaa8732514bef43cf}\label{a00818_a1882f10811364f7eaa8732514bef43cf}} 
\index{fire\+::\+State@{fire\+::\+State}!State@{State}}
\index{State@{State}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{State()}{State()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
\hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::\hyperlink{a00818}{State} (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ T $>$}]{domain\+State }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

An alternative default constructor that will accept a pre-\/configured unique\+\_\+ptr$<$\+T$>$. In general this constructor should not be called directly by clients. It is used by the \hyperlink{a00171_abca66b4f2a1543308b663714bd8b4855}{build$<$$>$()} builder for State$<$\+T$>$ to safely and easily enable two-\/phase construction where the arguments can be passed to T\textquotesingle{}s constructor without requiring State$<$\+T$>$ to know about those arguments.

This is important because requiring State$<$\+T$>$ to know about the arguments of T\textquotesingle{}s constructor would require declaring those arguments in all client classes of State$<$\+T$>$ that used that version of T, which is an undue burden on the user compared to safely enabling two-\/phase construction. \mbox{\Hypertarget{a00818_adb435ffb356eb26cf62876ede99b9a30}\label{a00818_adb435ffb356eb26cf62876ede99b9a30}} 
\index{fire\+::\+State@{fire\+::\+State}!State@{State}}
\index{State@{State}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{State()}{State()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
\hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::\hyperlink{a00818}{State} (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ T $>$}]{domain\+State,  }\item[{const long \&}]{num\+Elements }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

An alternative constructor that also sets the system size. Analog of \hyperlink{a00818_a40fd4082cd305e2054208a0b9aaa6ad4}{State(const long \&)}. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{a00818_adfb16dbbaab3549c09da734605f815a3}\label{a00818_adfb16dbbaab3549c09da734605f815a3}} 
\index{fire\+::\+State@{fire\+::\+State}!add\+Monitor@{add\+Monitor}}
\index{add\+Monitor@{add\+Monitor}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{add\+Monitor()}{addMonitor()}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
void \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::add\+Monitor (\begin{DoxyParamCaption}\item[{std\+::function$<$ void(\hyperlink{a00818}{State}$<$ T $>$ \&)$>$}]{monitor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

This operation registers a function with the state that will be called when the state changes. Multiple functions may be registered with the \hyperlink{a00818}{State} and each will be notified when the state is modified. The monitor may be implemented in many ways, but should only take a single State$<$\+T$>$\& as an input an return void.

When the monitoring function is called, it will be passed a reference to the instance of the \hyperlink{a00818}{State} class that changed, not merely to the maintained type. 
\begin{DoxyParams}{Parameters}
{\em monitor} & the functor that should be notified when the state changes. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{a00818_a4d20304931607c1cb27358fb3776a620}\label{a00818_a4d20304931607c1cb27358fb3776a620}} 
\index{fire\+::\+State@{fire\+::\+State}!dudt@{dudt}}
\index{dudt@{dudt}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{dudt()}{dudt()}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
double$\ast$ \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::dudt (\begin{DoxyParamCaption}\item[{const double \&}]{t }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

This function returns a simple array of size \hyperlink{a00818_a22b2d9e2feb153c819e90a4ac7ee8d72}{State.\+size()} which contains the derivatives of the primary \hyperlink{a00818}{State} variables with respect to t. Thus it behaves identically to u(t), but provides derivatives instead.

Note that calling this function with the value t will not reset the stored value of t! So calling \hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{t()} before and after this function will always return the same value.


\begin{DoxyParams}{Parameters}
{\em t} & the value of the free variable, normally time, at which the derivatives of state should be retrieved \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
dudt\+Values the derivatives at the given value of t 
\end{DoxyReturn}
\mbox{\Hypertarget{a00818_a71cec682edafbf5c3b09e9d6dc91f12b}\label{a00818_a71cec682edafbf5c3b09e9d6dc91f12b}} 
\index{fire\+::\+State@{fire\+::\+State}!get@{get}}
\index{get@{get}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
T\& \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::get (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

This operation returns the state at the most recent value of t. Please note the following nuances related to the use of \char`\"{}auto\+:\char`\"{} 
\begin{DoxyCode}
State<T> \hyperlink{a00818_a9a75139f1d613abc9fb82600757087f6}{state};
T & myT1 = state.get(); \textcolor{comment}{// Work}
\textcolor{keyword}{auto} & myT2 = state.get(); \textcolor{comment}{// Works - myT2 has type T &}
\textcolor{keyword}{auto} myT3 = state.get(); \textcolor{comment}{// Fails - myT3 has type T and is a copy}
\end{DoxyCode}
 \begin{DoxyReturn}{Returns}
state a reference to the state. 
\end{DoxyReturn}
\mbox{\Hypertarget{a00818_ad271749a2a4f73c11e82ae28141d3b65}\label{a00818_ad271749a2a4f73c11e82ae28141d3b65}} 
\index{fire\+::\+State@{fire\+::\+State}!notify\+Monitors@{notify\+Monitors}}
\index{notify\+Monitors@{notify\+Monitors}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{notify\+Monitors()}{notifyMonitors()}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
void \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::notify\+Monitors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

This function notifies the monitors. \mbox{\Hypertarget{a00818_a22b2d9e2feb153c819e90a4ac7ee8d72}\label{a00818_a22b2d9e2feb153c819e90a4ac7ee8d72}} 
\index{fire\+::\+State@{fire\+::\+State}!size@{size}}
\index{size@{size}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{size()}{size()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
void \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::size (\begin{DoxyParamCaption}\item[{const long \&}]{num\+Elements }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

This operation explicitly sets the number of unique data elements in the state. At present this value is constant for all values of t. present in the state. 
\begin{DoxyParams}{Parameters}
{\em int} & the number of unique data elements in the state \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{a00818_a19f1d7b5ce637db79b96f29bd146842a}\label{a00818_a19f1d7b5ce637db79b96f29bd146842a}} 
\index{fire\+::\+State@{fire\+::\+State}!size@{size}}
\index{size@{size}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{size()}{size()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
int \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

This operation returns the number of unique elements in the state. At present this value is constant for all values of t. This is the size of the arrays u and dudt. \begin{DoxyReturn}{Returns}
int the size of the state and the state arrays 
\end{DoxyReturn}
\mbox{\Hypertarget{a00818_a5d8acc4d5bdd8942de10d34c55680349}\label{a00818_a5d8acc4d5bdd8942de10d34c55680349}} 
\index{fire\+::\+State@{fire\+::\+State}!t@{t}}
\index{t@{t}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{t()}{t()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
void \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::t (\begin{DoxyParamCaption}\item[{double}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

This operation updates the value of t. 
\begin{DoxyParams}{Parameters}
{\em t} & the new value of t \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{a00818_a425a0236c4edc506b30196d352118104}\label{a00818_a425a0236c4edc506b30196d352118104}} 
\index{fire\+::\+State@{fire\+::\+State}!t@{t}}
\index{t@{t}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{t()}{t()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
const double\& \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::t (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

This operation retrieves the most recent value of t. \begin{DoxyReturn}{Returns}
the most recent value of t 
\end{DoxyReturn}
\mbox{\Hypertarget{a00818_a54507a9e31127580a2c485ce9829934e}\label{a00818_a54507a9e31127580a2c485ce9829934e}} 
\index{fire\+::\+State@{fire\+::\+State}!u@{u}}
\index{u@{u}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{u()}{u()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
double$\ast$ \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::u (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

This function returns a simple array of size \hyperlink{a00818_a22b2d9e2feb153c819e90a4ac7ee8d72}{State.\+size()} which contains the values of the fundamental state vector for this type. This vector is normally used by independent solvers looking to solve systems of equations or analysis routines (regression, etc.) in which case it represents the most recent values of the \char`\"{}unknowns\char`\"{} in the (thus the name \char`\"{}u\char`\"{}). So, for example, when solving the heat equation this could include a vector of temperatures at a given t, but it wouldn\textquotesingle{}t, in general, contain the heat transfer coefficients. The distinction is that the temperature is the unknown in the system and coefficients are already well known.

In general, this function should only be used for coupling to Solvers and other systems by developers and most clients should work with their classes retrieved via the \hyperlink{a00818_a71cec682edafbf5c3b09e9d6dc91f12b}{get()} operation.

\begin{DoxyReturn}{Returns}
u\+Values the state 
\end{DoxyReturn}
\mbox{\Hypertarget{a00818_a1b6b91c51fe4d53f268a33c77fecff11}\label{a00818_a1b6b91c51fe4d53f268a33c77fecff11}} 
\index{fire\+::\+State@{fire\+::\+State}!u@{u}}
\index{u@{u}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{u()}{u()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
void \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::u (\begin{DoxyParamCaption}\item[{double $\ast$}]{data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

This function sets the values of the unknown quantities. It is the inverse of double $\ast$ \hyperlink{a00818_a54507a9e31127580a2c485ce9829934e}{u()} above and is meant to set the values, at the given value of t, for the same fundamental state vector for t\+\_\+n $>$ t\+\_\+(n-\/1). So, for example, this operation could take an input array for t $>$ t\+\_\+(n-\/1) that represents the values of temperature just solved for in a coupled thermomechanics system. However, it would not take diffusion coefficient or other quantities.

If the result of the getter \hyperlink{a00818_a54507a9e31127580a2c485ce9829934e}{State.\+u()}\+:double$\ast$ (see above) is a pointer that is mapped to an array in the stored instance of T, then it is not necessary to call this operation because editing u$\ast$ directly will update the state. However, in cases where it is desirable to either not map directly to the managed data structure or to use \char`\"{}test values\char`\"{} of u, then this function is a handy convenience function. For example, 
\begin{DoxyCode}
\textcolor{keywordtype}{double} * u = state.u()  \textcolor{comment}{// Get the current state}
\textcolor{keywordtype}{double} t = state.t()    \textcolor{comment}{// and t}
\textcolor{keywordtype}{int} size = state.size() \textcolor{comment}{// and size}

\textcolor{comment}{// Make some test updates to u}
\textcolor{keywordtype}{double} * myU = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[\hyperlink{a00818_a19f1d7b5ce637db79b96f29bd146842a}{size}];
\textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \hyperlink{a00818_a19f1d7b5ce637db79b96f29bd146842a}{size}; i++) \{
    myU[i] = u[i] + delta();
    ... bunch of other stuff...
\}

\textcolor{comment}{// Submit the new values}
state.u(myU);
\textcolor{keywordtype}{double} * myDudt = state.dudt();

... other stuff ...

delete myU;
\end{DoxyCode}


The default implementation assumes that u is direct pointer to an array in the underlying type T, so implementations may need to override this operation if they do not map directly to the state instance. Furthermore, this operation assumes that the incoming array should be copied instead of referred to directly.


\begin{DoxyParams}{Parameters}
{\em data} & the values of the unknown state variables to be set. The size of this array is expected to be equal to \hyperlink{a00818_a22b2d9e2feb153c819e90a4ac7ee8d72}{State.\+size()}. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{a00818_a9cc60054f9342b4a84b29937dc45a6d8}\label{a00818_a9cc60054f9342b4a84b29937dc45a6d8}} 
\index{fire\+::\+State@{fire\+::\+State}!u@{u}}
\index{u@{u}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{u()}{u()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily template$<$$>$ \\
double $\ast$ \hyperlink{a00818}{fire\+::\+State}$<$ \hyperlink{a00738}{Reaction\+Network} $>$\+::u (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

namespace astrophysics The following operations are explicit instantiations for the \hyperlink{a00818}{State} state class so that Reaction\+Network can be used in the solver. See \hyperlink{a00095_source}{State.\+h} in solvers/ for more information. 

\subsection{Member Data Documentation}
\mbox{\Hypertarget{a00818_a9954ba8c1a12555ca1bf67b6a2bf2b3b}\label{a00818_a9954ba8c1a12555ca1bf67b6a2bf2b3b}} 
\index{fire\+::\+State@{fire\+::\+State}!dudt\+Arr@{dudt\+Arr}}
\index{dudt\+Arr@{dudt\+Arr}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{dudt\+Arr}{dudtArr}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
std\+::unique\+\_\+ptr$<$double$>$ \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::dudt\+Arr\hspace{0.3cm}{\ttfamily [protected]}}

This is a utility array that can be used by clients a buffer for holding state derivative values if they cannot be directly mapped to a member on T. \mbox{\Hypertarget{a00818_ae1571b0a1c82060e525ce6ce2119ae5e}\label{a00818_ae1571b0a1c82060e525ce6ce2119ae5e}} 
\index{fire\+::\+State@{fire\+::\+State}!monitors@{monitors}}
\index{monitors@{monitors}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{monitors}{monitors}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
std\+::vector$<$std\+::function$<$void(\hyperlink{a00818}{State}$<$T$>$\&)$>$ $>$ \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::monitors\hspace{0.3cm}{\ttfamily [protected]}}

The list of monitors that should be notified when the state changes. \mbox{\Hypertarget{a00818_a9a75139f1d613abc9fb82600757087f6}\label{a00818_a9a75139f1d613abc9fb82600757087f6}} 
\index{fire\+::\+State@{fire\+::\+State}!state@{state}}
\index{state@{state}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{state}{state}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
std\+::shared\+\_\+ptr$<$T$>$ \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::state\hspace{0.3cm}{\ttfamily [protected]}}

The managed instance of the \hyperlink{a00818}{State} of type T. \mbox{\Hypertarget{a00818_a08f8f4ea745ae855ef730896efabf1ae}\label{a00818_a08f8f4ea745ae855ef730896efabf1ae}} 
\index{fire\+::\+State@{fire\+::\+State}!system\+Size@{system\+Size}}
\index{system\+Size@{system\+Size}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{system\+Size}{systemSize}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
long \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::system\+Size\hspace{0.3cm}{\ttfamily [protected]}}

The system size of the state. \mbox{\Hypertarget{a00818_a4985617940993cea772a7fc977c87237}\label{a00818_a4985617940993cea772a7fc977c87237}} 
\index{fire\+::\+State@{fire\+::\+State}!t\+Val@{t\+Val}}
\index{t\+Val@{t\+Val}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{t\+Val}{tVal}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
double \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::t\+Val\hspace{0.3cm}{\ttfamily [protected]}}

The most recent value of t provided by \hyperlink{a00818_a5d8acc4d5bdd8942de10d34c55680349}{State.\+t()}. \mbox{\Hypertarget{a00818_aae89d6e350df763d503d7da862f1f30a}\label{a00818_aae89d6e350df763d503d7da862f1f30a}} 
\index{fire\+::\+State@{fire\+::\+State}!u\+Arr@{u\+Arr}}
\index{u\+Arr@{u\+Arr}!fire\+::\+State@{fire\+::\+State}}
\subsubsection{\texorpdfstring{u\+Arr}{uArr}}
{\footnotesize\ttfamily template$<$typename T$>$ \\
std\+::unique\+\_\+ptr$<$double$>$ \hyperlink{a00818}{fire\+::\+State}$<$ T $>$\+::u\+Arr\hspace{0.3cm}{\ttfamily [protected]}}

This is a utility array that can be used by clients a buffer for holding state values if they cannot be directly mapped to a member on T. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
State.\+h\end{DoxyCompactItemize}
